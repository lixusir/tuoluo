!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.myui=e():t.myui=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=1)}([function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){"use strict";n.r(e);var r,o=n(0),i=n.n(o),a=new(function(){function t(){}return t.prototype.up=function(t){var e=this,n=this.toBuild(t),r=n.temStr,o=n.names;this.Root.innerHTML=r;var i=this.getNodes(o);return function(t){t(i,e.animate)}},t.prototype.toBase=function(t,e){var n=this,r=this.toBuild(e),o=r.temStr,i=r.names;t.innerHTML=o;var a=this.getNodes(i);return function(t){t(a,n.animate)}},t.prototype.getNodes=function(t){var e={};return t.forEach(function(t){var n=t.split("=")[1];e[n]=document.querySelector("["+t+"]")}),e},t.prototype.animate=function(t,e,n){void 0===n&&(n={});var r=n.transition,o=void 0===r?0:r,i=n.duration,a=void 0===i?0:i,c=n.rate,u=void 0===c?"ease":c,s=e.length-1,f=e[0],l=e[s];return Object.keys(f).forEach(function(e){t.style[e]=f[e]}),setTimeout(function(){t.style.transition="all "+o/1e3+"s "+u,Object.keys(l).forEach(function(e){t.style[e]=l[e]})},a),new Promise(function(t){setTimeout(function(){t(!0)},o+a)})},t.prototype.buildRoot=function(){this.Root=document.createElement("div"),this.Root.setAttribute("id","root_MyUI"),document.body.append(this.Root)},t.prototype.toBuild=function(t){this.Root||this.buildRoot();var e=t.create(),n=e.match(/data-name="([a-z | 0-9]+)/g);return{temStr:e,names:n.map(function(t){return""+t.split('"')[0]+t.split('"')[1]})}},t}()),c=function(){function t(){}return t.prototype.setStyle=function(t,e){Object.keys(e).forEach(function(n){t.style[n]=e[n]})},t.prototype.getHTMLString=function(t){var e=document.createElement("div");return e.append(t),e.innerHTML},t}(),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.argsHandler=function(t){var e=t||{},n=e.name,r=e.style,o=e.children;this.name=n||"",this.style=r||{},this.children=o||[]},e.prototype.create=function(){var t=document.createElement("div");t.setAttribute("data-name",this.name);var e=this.setDefaultStyle(),n=e.canCover,r=e.notCover;return this.style=s(s(s({},n),this.style),r),this.setStyle(t,this.style),this.children.filter(function(t){return t}).forEach(function(e){t.innerHTML+=e.create()}),this.getHTMLString(t)},e}(c),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(e){var n=t.call(this)||this;return n.argsHandler(e),n}return l(e,t),e.prototype.setDefaultStyle=function(){return{canCover:{position:"absolute"},notCover:{display:"inline-block"}}},e}(f),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(e){var n=t.call(this)||this;return n.argsHandler(e),n}return p(e,t),e.prototype.setDefaultStyle=function(){return{canCover:{width:"100%",textAlign:"center"},notCover:{display:"block",position:"relative"}}},e}(f),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(t){function e(e){var n=t.call(this)||this;return n.argsHandler(e),n}return y(e,t),e.prototype.setDefaultStyle=function(){return{canCover:{position:"absolute"},notCover:{display:"-webkit-flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}},e}(f),v=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(e){var n=t.call(this)||this;return n.argsHandler(e),n}return v(e,t),e.prototype.setDefaultStyle=function(){return{canCover:{backgroundColor:"rgba(0,0,0,0.5)"},notCover:{display:"-webkit-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw",position:"absolute",left:0,top:0}}},e}(f),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(t){function e(e){var n=t.call(this)||this;return n.content=e,n}return g(e,t),e.prototype.create=function(){return this.content},e}(c),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(t){function e(e){var n=t.call(this)||this,r=e.name,o=e.attr,i=e.style,a=void 0===i?{}:i;return n.name=r,n.attribute=o,n.style=a,n}return _(e,t),e.prototype.create=function(){var t=this,e=document.createElement("input");return e.setAttribute("data-name",this.name),Object.keys(this.attribute).forEach(function(n){e[n]=t.attribute[n]}),this.setStyle(e,this.style),this.getHTMLString(e)},e}(c),j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(e){var n=t.call(this)||this;return n.argsHandler(e),n}return j(e,t),e.prototype.setDefaultStyle=function(){return{canCover:{},notCover:{}}},e}(f),O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(t){function e(e){var n=t.call(this)||this,r=e.name,o=e.attr,i=e.style,a=void 0===i?{}:i;return n.name=r,n.attribute=o,n.style=a,n}return O(e,t),e.prototype.create=function(){var t=this,e=document.createElement("img");return e.setAttribute("data-name",this.name),Object.keys(this.attribute).forEach(function(n){e[n]=t.attribute[n]}),this.setStyle(e,this.style),this.getHTMLString(e)},e}(c),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(t){function e(e){var n=t.call(this)||this,r=e.name,o=e.attr,i=e.style,a=void 0===i?{}:i;return n.name=r,n.attribute=o,n.style=a,n}return C(e,t),e.prototype.create=function(){var t=this,e=document.createElement("canvas");return e.setAttribute("data-name",this.name),Object.keys(this.attribute).forEach(function(n){e[n]=t.attribute[n]}),this.setStyle(e,this.style),this.getHTMLString(e)},e}(c),A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=(function(t){function e(e){var n=t.call(this)||this;return n.template=e,n}A(e,t),e.prototype.create=function(){return this.template}}(c),function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})}),L=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},D=function(t){var e,n="50%",r=1e3,o="#f2f2f2",c="2em",u="#000";if("object"===i()(t)){var s=t.message,f=t.position,l=t.duration,p=t.backgroundColor,d=t.borderRadius,y=t.color;e=s,n="top"===f?"10%":"bottom"===f?"80%":n,r=l,o=p||o,c=d||c,u=y||u}else e=t;function m(t){var e=t.clientWidth,n=t.clientHeight;t.style.marginLeft="-"+e/2+"px",t.style.marginTop="-"+n/2+"px"}a.up(new h({name:"toast",style:{backgroundColor:o,padding:"0.9rem 1.2rem",borderRadius:c,maxWidth:"60%",fontSize:"0.9rem",position:"fixed",top:n,left:"50%",color:u,zIndex:9999},children:[new w(e)]}))(function(t,e){return P(this,void 0,void 0,function(){var n;return L(this,function(o){switch(o.label){case 0:return m(n=t.toast),m(n),[4,e(n,[{opacity:"0"},{opacity:"1"}],{transition:500})];case 1:return o.sent(),[4,e(n,[{opacity:"1"},{opacity:"0"}],{transition:800,duration:r})];case 2:return o.sent(),n.remove(),[2]}})})})},E=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})},T=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var R=function(t,e){var n,r=function(t){var e,n,r="alert";"object"===i()(t)?(r=t.type,e=t.title,n=t.message):n=t;var o=new d({name:"title",style:{padding:"0.5rem 0",marginTop:"-0.5rem"},children:[new w(e)]});return[e&&o,new d({name:"content",style:{padding:"1rem 0",paddingBottom:"1.5rem",fontSize:"0.9rem",color:"#999"},children:[new w(n)]}),new d({name:"btnbox",style:{borderTop:"1px solid #efefef"},children:[new h({name:"confirm",style:{width:"alert"===r?"100%":"50%",textAlign:"center",position:"relative",padding:"0.8rem 0",color:"#1989fa",borderRight:"1px solid #efefef",boxSizing:"border-box"},children:[new w("確定")]}),"alert"!==r&&new h({name:"cancel",style:{width:"50%",textAlign:"center",position:"relative",padding:"0.8rem 0",color:"#1989fa"},children:[new w("取消")]})]})]}(t);return function(t){e?t(e):n=new Promise(function(e){t(e)})}(function(t){a.up(new b({name:"dialog",style:{zIndex:9999},children:[new m({name:"box",style:{backgroundColor:"#fff",width:"80%",position:"relative",paddingTop:"0.6rem",transform:"scale(0.5)",borderRadius:"10px",overflow:"hidden",marginTop:"-8rem"},children:r})]}))(function(e,n){return E(this,void 0,void 0,function(){function r(t){return E(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,n(t,[{backgroundColor:"#fff"},{backgroundColor:"#ccc"}],{transition:100})];case 1:return e.sent(),t.style.backgroundColor="#fff",[2,new Promise(function(t){t(!0)})]}})})}function o(){return E(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,n(c,[{opacity:"1"},{opacity:"0"}],{transition:300})];case 1:return t.sent(),c.remove(),[2]}})})}var i,a,c,u;return T(this,function(s){switch(s.label){case 0:return i=e.box,a=e.confirm,c=e.dialog,u=e.cancel,[4,n(i,[{transform:"scale(0)",opacity:"0"},{transform:"scale(1)",opacity:"1"}],{transition:200})];case 1:return s.sent(),a.addEventListener("click",function(){return E(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,r(a)];case 1:return e.sent(),o(),t(!0),[2]}})})}),u&&u.addEventListener("click",function(){return E(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,r(u)];case 1:return e.sent(),o(),t(!1),[2]}})})}),[2]}})})})}),n},I=function(){function t(t){this.isLeapYear=!1,this.isBigMonth=!1,this.container=t}return t.prototype.init=function(t){return void 0===t&&(t=[]),this.checkInData=t,this.getCurrentDate(),this.judgeLeapYear(),this.judgeBigMonth(),this.judgeWeekNumAtMonth(),this.creatCalendar(),{year:this.year,month:this.month,day:this.day}},t.prototype.prevMonth=function(){return this.container.innerHTML="",this.month--,this.month<1&&(this.month=12,this.year--,this.judgeLeapYear()),this.judgeBigMonth(),this.judgeWeekNumAtMonth(),this.creatCalendar(),{year:this.year,month:this.month}},t.prototype.nextMonth=function(){return this.container.innerHTML="",this.month++,this.month>12&&(this.month=1,this.year++,this.judgeLeapYear()),this.judgeBigMonth(),this.judgeWeekNumAtMonth(),this.creatCalendar(),{year:this.year,month:this.month}},t.prototype.toYear=function(t){return this.year=Number(t),this.container.innerHTML="",this.judgeLeapYear(),this.judgeBigMonth(),this.judgeWeekNumAtMonth(),this.creatCalendar(),{year:this.year,month:this.month}},t.prototype.toMonth=function(t){return this.month=Number(t),this.container.innerHTML="",this.judgeBigMonth(),this.judgeWeekNumAtMonth(),this.creatCalendar(),{year:this.year,month:this.month}},t.prototype.getCurrentDate=function(){var t=new Date;this.year=t.getFullYear(),this.currentYear=t.getFullYear(),this.month=t.getMonth()+1,this.currentMonth=t.getMonth()+1,this.day=t.getDate()},t.prototype.judgeLeapYear=function(){(this.year%4==0&&this.year%100!=0||this.year%400==0||this.year%3200==0&&this.year%172800==0)&&(this.isLeapYear=!0)},t.prototype.judgeBigMonth=function(){if(this.month<8)return this.month%2==0?this.isBigMonth=!1:this.isBigMonth=!0,!1;this.month%2==0?this.isBigMonth=!0:this.isBigMonth=!1},t.prototype.judgeWeekNumAtMonth=function(){var t=new Date(this.year+"/"+this.month+"/1");this.firstDayWeek=t.getDay()},t.prototype.judgeCheckIn=function(t){var e=this.year+"-"+this.month+"-"+t;return this.checkInData.some(function(t){return t===e})},t.prototype.creatCalendar=function(){var t=document.createElement("table"),e=document.createElement("tbody"),n=document.createElement("thead"),r="",o="",i=document.createElement("tr"),a=1,c=0;c=this.isBigMonth?31:30,2===this.month&&this.isLeapYear?c=29:2===this.month&&(c=28);for(var u=document.createElement("tr"),s=0;s<7;s++){o=o+"<th>"+(0===s?"日":1===s?"一":2===s?"二":3===s?"三":4===s?"四":5===s?"五":6===s?"六":"")+"</th>"}u.innerHTML=o,n.appendChild(u);var f=0;for(s=0;s<42;s++){if(s>=this.firstDayWeek&&a<=c){var l=this.judgeCheckIn(a);f=0,r=this.currentMonth===this.month&&this.day===a&&this.currentYear===this.year?r+'<td><span id="today">'+a+"</span></td>":l?r+'<td><span class="checked">'+a+"</span></td>":r+"<td><span>"+a+"</span></td>",a++}else f++,r+="<td></td>";(s+1)%7==0&&f<7&&(i.innerHTML=r,e.appendChild(i),i=document.createElement("tr"),r="")}t.appendChild(n),t.appendChild(e),this.tBody=e,this.container.appendChild(t),this.dayClickEvent()},t.prototype.dayClickEvent=function(){var t=this;this.tBody.addEventListener("click",function(e){var n=Number(e.target.innerText),r=t,o=r.year,i=r.month;t.dayClickHook&&t.dayClickHook(o+"-"+i+"-"+n,e.target)})},t}();function H(t){return new Promise(function(e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result)},n.onerror=function(){console.warn("文件讀取發生錯誤"),e(!1)}})}var Y=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})},B=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function z(t,e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=new Image;return o.src=t,new Promise(function(t){o.onload=function(){var i=o.width,a=o.height,c=i-a<0,u=c?e:i*e/a,s=c?a*e/i:e;n.width=u,n.height=s,r.drawImage(o,0,0,u,s);var f=n.toDataURL("image/jpeg");t({imgDataURL:f,canvas:n})}})}var U=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){return Y(this,void 0,void 0,function(){var n,r,o,i;return B(this,function(a){switch(a.label){case 0:return this.cuttingSize=.8*document.body.scrollWidth,[4,H(e)];case 1:return(n=a.sent())?[4,z(n,this.cuttingSize)]:[3,3];case 2:r=a.sent(),o=r.imgDataURL,i=r.canvas,this.imgDataURL=o,this.canvasOfreseted=i,this.createView(t),a.label=3;case 3:return[2]}})})},t.prototype.createView=function(t){var e=this,n=this.imgDataURL,r=this.canvasOfreseted,o=this.cuttingSize;a.toBase(t,new k({name:"cutbox",style:{position:"absolute",top:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:100},children:[new M({name:"canvas",attr:{height:o,width:o},style:{border:"1px solid #ffffff",position:"absolute",zIndex:100}}),new k({name:"overlay",style:{width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.7)",position:"absolute",top:0,left:0,zIndex:99}}),new S({name:"img",attr:{src:n},style:{position:"absolute",zIndex:98}})]}))(function(t){return Y(e,void 0,void 0,function(){var e,n,i,a,c=this;return B(this,function(u){return e=t.canvas,n=t.img,i=t.cutbox,a=e.getContext("2d"),n.onload=function(){var t=r.width,u=r.height,s=t/2-o/2,f=u/2-o/2;a.drawImage(r,s,f,o,o,0,0,o,o);var l=s,h=f;!function(t,e,n){var r,o,i=0,a=0,c=e.width-e.height<0;t.ontouchstart=function(t){var e=t.changedTouches[0],n=e.pageX,c=e.pageY;return r=n-i,o=c-a,!1},t.ontouchmove=function(t){var u=t.changedTouches[0],s=u.pageX,f=u.pageY;return i=c?0:s-r,a=c?f-o:0,e.style.transform="translate("+i+"px, "+a+"px)",n(i,a),!1}}(e,n,function(t,n){a.clearRect(0,0,e.width,e.height),l=s-t,h=f-n,a.drawImage(r,l,h,o,o,0,0,o,o)}),c.toCuting=function(){a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.drawImage(r,l,h,o,o,0,0,o,o);var t=e.toDataURL("image/jpeg"),n=function(t,e){for(var n=t.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],e,{type:r})}(t,String((new Date).getTime()));return i.remove(),{base64:t,file:n}}},[2]})})})},t}(),N=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})},F=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},W=function(t,e){void 0===t&&(t={}),t instanceof Function&&(e=t,t={});var n,r=t.accept,o=void 0===r?"image/*":r,i=t.maxSize,c=void 0===i?3145728:i,u=t.quality,s=void 0===u?.1:u,f=t.capture;function l(t){return new Promise(function(e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e({base64:n.result})},n.onerror=function(){console.warn("文件讀取發生錯誤"),e({err:!0})}})}function h(t,e){return new Promise(function(n,r){try{var o=new Image;o.src=t,o.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=o.width,t.height=o.height,r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.drawImage(o,0,0,o.width,o.height);var i=t.toDataURL("image/jpeg",s),a=function(t,e){for(var n=t.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],e,{type:r})}(i,e);n({base64:i,file:a})}}catch(t){r(t)}})}return(s<0||s>.92)&&(console.warn("數值quality, 必須位於 0-0.92 區間內, 已重置爲默認值, 0.1"),s=.1),function(t){e?t(e):n=new Promise(function(e){t(e)})}(function(t){a.up(new x({name:"upload",attr:{type:"file",accept:o},style:{display:"none"}}))(function(e){return N(this,void 0,void 0,function(){var n;return F(this,function(r){return n=e.upload,f&&n.setAttribute("capture",f),n.click(),n.addEventListener("change",function(e){return N(this,void 0,void 0,function(){var r,o,i,a;return F(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),[4,l(r=e.target.files[0])];case 1:return(o=u.sent().base64)?r.size>c?[4,h(o,r.name.split(".")[0])]:[3,3]:(t({err:!0,file:r,msg:"base64轉換過程發生錯誤"}),n.remove(),[2]);case 2:return i=u.sent(),t({file:i.file,base64:i.base64}),n.remove(),[3,4];case 3:t({file:r,base64:o}),n.remove(),u.label=4;case 4:return[3,6];case 5:return a=u.sent(),t({err:!0,msg:a}),n.remove(),[3,6];case 6:return[2]}})})}),[2]})})})}),n};function G(t){return t.length<2?"0"+t:t}var q=function(t,e,n){void 0===e&&(e="YYYY/MM/DD hh:mm:ss"),void 0===n&&(n=!0),"string"==typeof t&&t.includes("-")&&(t=function t(e){return-1===e.indexOf("-")?e:t(e.replace("-","/"))}(t));var r=new Date(t),o=r.getFullYear().toString(),i=(r.getMonth()+1).toString(),a=r.getDate().toString(),c=r.getHours().toString(),u=r.getMinutes().toString(),s=r.getSeconds().toString();n&&(i=G(i),a=G(a),c=G(c),u=G(u),s=G(s));var f=[{time:o,format:"YYYY"},{time:i,format:"MM"},{time:a,format:"DD"},{time:c,format:"hh"},{time:u,format:"mm"},{time:s,format:"ss"}],l=0;return function t(e){if(++l>f.length)return e;var n=f[l-1],r=n.format,o=n.time;return t(e.replace(r,o))}(e)},V=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}u((r=r.apply(t,e||[])).next())})},X=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function $(t){return new Promise(function(e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){e({base64:n.result})},n.onerror=function(){console.warn("文件讀取發生錯誤"),e({err:!0})}})}function J(t,e){return V(this,void 0,void 0,function(){function n(t){try{var e=new Image;e.src=r,e.onload=function(){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=e.width,n.height=e.height,r.fillStyle="#fff",r.fillRect(0,0,n.width,n.height),r.drawImage(e,0,0,e.width,e.height);var o=n.toDataURL("image/jpeg",c),a=function(t,e){for(var n=t.split(","),r=n[0].match(/:(.*?);/)[1],o=atob(n[1]),i=o.length,a=new Uint8Array(i);i--;)a[i]=o.charCodeAt(i);return new File([a],e,{type:r})}(o,i);t({base64:o,file:a})}}catch(t){console.error(t)}}var r,o,i,a,c,u,s;return X(this,function(f){switch(f.label){case 0:return r=t.src,o=t.file,i=t.fileName,a=t.quality,c=void 0===a?.1:a,o||r?o?[4,$(o)]:[3,2]:[2,console.error("src 與 file 參數 不可都爲空")];case 1:s=f.sent().base64,r=s,f.label=2;case 2:return function(t){e?t(e):u=new Promise(function(e){t(e)})}(n),[2,u]}})})}function K(t,e,n){Object.keys(e).forEach(function(r){var o=n+"["+r+"]",a=e[r];return"object"!==i()(a)||a instanceof Array?a instanceof Array?(Q(t,a,o),!1):void(t.append?t.append(o,a):t[o]=a):(K(t,a,o),!1)})}function Q(t,e,n){e.forEach(function(e,r){var o=n+"["+r+"]",a=e;return"object"!==i()(a)||a instanceof Array?a instanceof Array?(Q(t,a,o),!1):void(t.append?t.append(o,a):t[o]=a):(K(t,a,o),!1)})}function Z(t){var e=new FormData;return Object.keys(t).forEach(function(n){var r=t[n];return"object"!==i()(r)||r instanceof Array||r instanceof File?r instanceof Array?(Q(e,r,n),!1):void e.append(n,r):(K(e,r,n),!1)}),e}Z.wx=function(t){if(!t)return console.warn("參數不能爲空");var e={};return Object.keys(t).forEach(function(n){var r=t[n];return"object"!==i()(r)||r instanceof Array?r instanceof Array?(Q(e,r,n),!1):void(e[n]=r):(K(e,r,n),!1)}),e};var tt=Z,et={setCookie:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;if(e){var r=new Date;r.setTime(r.getTime()+60*n*1e3),document.cookie="".concat(t,"=").concat(e,";expires=").concat(r.toGMTString(),";path=/")}},getCookie:function(t){var e,n=new RegExp("(^| )".concat(t,"=([^;]*)(;|$)"));return(e=document.cookie.match(n))?unescape(e[2]):null}};n.d(e,"toast",function(){return D}),n.d(e,"dialog",function(){return R}),n.d(e,"uploadImg",function(){return W}),n.d(e,"toLocaleString",function(){return q}),n.d(e,"compressImg",function(){return J}),n.d(e,"Calendar",function(){return I}),n.d(e,"ImgCut",function(){return U}),n.d(e,"formData",function(){return tt}),n.d(e,"cookie",function(){return et})}])});