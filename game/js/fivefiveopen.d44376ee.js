(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fivefiveopen"],{"2f8c":function(e,t,n){},9784:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("my-overlay",[r("div",{attrs:{id:"fivefiveopen"}}),r("my-prompt",{attrs:{show:e.promptShow},on:{confirm:e.onConfirm}},[r("div",{staticClass:"prize_eggs"},[r("img",{staticClass:"card_prize",attrs:{src:n("e790"),alt:"鸟"}}),r("span",[e._v("恭喜获得"+e._s(e.specialBirdNames["top"]))])])])],1)},i=[],a=(n("a4d3"),n("4de4"),n("4160"),n("45fc"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("ade3")),o=n("2f62"),s=(n("b680"),n("4fad"),n("2909")),c=n("d4ec"),u=n("bee2"),p=n("9f8e"),f=n("6564"),l=n("4360"),h=n("d399");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=window.innerHeight/window.innerWidth>=1.85,g={jin:"bird_img_jin",mu:"bird_img_mu",shui:"bird_img_shui",huo:"bird_img_huo",tu:"bird_img_tu"},v=function(){function e(){Object(c["a"])(this,e),Object(a["a"])(this,"_scene",null),Object(a["a"])(this,"_layer",null),Object(a["a"])(this,"_canvasWidth",750),Object(a["a"])(this,"_canvasHeight",b?1524:1334),Object(a["a"])(this,"_mixing",!1),Object(a["a"])(this,"_fiveNum",0),Object(a["a"])(this,"_hooks",{onClose:null,onMixing:null,onMixed:null}),this._init()}return Object(u["a"])(e,[{key:"listen",value:function(e){this._hooks=m({},e)}},{key:"_init",value:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e=this._canvasWidth,t=this._canvasHeight,this._scene=new p["c"]("#fivefiveopen",{viewport:["auto","auto"],resolution:[e,t]}),this._layer=this._scene.layer(),n.next=5,regeneratorRuntime.awrap(this._loading());case 5:this._createStage();case 6:case"end":return n.stop()}}),null,this)}},{key:"_createStage",value:function(){var e=this,t=new p["d"];t.attr({textures:"bg_img_title.png",size:[445,238],pos:[153,242]});var n=new p["d"];n.attr({textures:"btn_close.png",anchor:.5,size:[80,80],pos:[676,289]});var r=new p["d"];r.attr({textures:"bg_img_sjhc.png",size:[750,645],pos:[0,383]});var i=new p["d"];i.attr({textures:"turntable_img.png",anchor:.5,size:[300,300],pos:[374,692]});var a=this._createBirdsGroup(),o=new p["d"];o.attr({textures:"btn_start.png",anchor:.5,size:[130,130],pos:[376,690]}),this._layer.append(t,n,r,i,a,o),this._touchAnimated(n,(function(){if(e._mixing)return!1;e._hooks.onClose&&e._hooks.onClose()})),this._touchAnimated(o,(function(){if(e._fiveNum<5)return Object(h["a"])("你尚未集齐五凤"),!1;e._hooks.onMixing&&e._hooks.onMixing(),e._mixing=!0,e._mixingEffect(o,a,i)}))}},{key:"_mixingEffect",value:function(e,t,n){var r=this;e.remove();var i=t.children,a=0;n.animate([{rotate:0},{rotate:360}],{duration:100,iterations:1/0}),setTimeout((function(){i.forEach((function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e.children[1].remove(),t.next=3,regeneratorRuntime.awrap(e.transition(.5).attr({translate:[0,204],opacity:0}));case 3:a++,5===a&&r._starEffect(r._layer,(function(){r._layer.timeline.playbackRate=0,r._mixing=!1,r._hooks.onMixed&&r._hooks.onMixed()}));case 5:case"end":return t.stop()}}))}))}),1e3)}},{key:"_starEffect",value:function(e,t){for(var n=this._canvasWidth,r=this._canvasHeight,i=[],a=0,o=100,s=0;s<o;s++){var c=new p["d"],u=5*Math.random();c.attr({textures:"star_effect.png",size:[30,30],anchor:.5,pos:[n/2,685],scale:u}),e.append(c),i.push(c)}i.forEach((function(e){var i,s;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return i=Math.floor(Math.random()*(n/2- -n/2+1)+-n/2),s=Math.floor(Math.random()*(r/2- -r/2+1)+-r/2),c.next=4,regeneratorRuntime.awrap(e.transition(1).attr({translate:[i,s],scale:0}));case 4:a++,a===o&&t&&t();case 6:case"end":return c.stop()}}))}))}},{key:"_createBirdsGroup",value:function(){var e=this,t=560,n=t/2-76,r=[t/2,t/2],i=new p["a"];return i.attr({anchor:.5,size:[t,t],pos:[95+t/2,405+t/2],rotate:180}),Object.entries(g).forEach((function(t,a){var o=l["a"].state.birdList.some((function(e){return e.mark===t[0]})),s="".concat(t[1],o?".png":"_sketch.png");o&&e._fiveNum++;var c=r[0]+Math.sin(2*Math.PI/360*(72*a))*n,u=r[1]+Math.cos(2*Math.PI/360*(72*a))*n,f=new p["a"];f.attr({display:"flex",flexWrap:"wrap",flexDirection:"column",alignItems:"center",anchor:.5,size:[141,141],pos:[c,u],rotate:180-72*a});var h=new p["d"];h.attr({textures:s,anchor:.5,pos:[75,50],height:90});var d=new p["b"];d.attr({text:l["a"].state.specialBirdNames[t[0]],textAlign:"center",bgcolor:"rgba(255,255,255, 0.5)",font:"small-caps bold 21px Arial",color:"#6C2127",padding:[10,15,5,15],borderRadius:20}),f.append(h,d),i.append(f)})),i}},{key:"_loading",value:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this._scene.on("preload",(function(e){console.log("加载中... ".concat(100*(e.loaded.length/e.resources.length).toFixed(2),"%"))})),t.next=3,regeneratorRuntime.awrap((e=this._scene).preload.apply(e,Object(s["a"])(f["a"].fivefiveopen)));case 3:case"end":return t.stop()}}),null,this)}},{key:"_touchAnimated",value:function(e,t){e.on("touchstart",(function(t){t.stopDispatch(),e.attr({scale:.95})})),e.on("touchend",(function(n){n.stopDispatch(),e.attr({scale:1}),t&&t()}))}}]),e}(),_=v,w=n("13f3");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={name:"fivefiveopen",data:function(){return{promptShow:!1}},computed:y({},Object(o["b"])(["birdList","specialBirdNames"])),mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=new _;t.listen({onClose:function(){e.$router.back(-1)},onMixing:function(){var t,n,r,i;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(e.$ajax("fivefiveopen"));case 2:if(t=a.sent,t){a.next=5;break}return a.abrupt("return",!1);case 5:return n=t.bird,r=t.del,i=JSON.parse(JSON.stringify(e.birdList)),r.forEach((function(e){i.some((function(t){if(t.id===e)return t.id=null,t.mark=null,t.income=0,t.level=-1,!0}))})),i.some((function(e){if(!e.id){var t=n.id,r=n.level,i=n.typeName,a=n.income;return e.id=t,e.mark=i,e.income=a,e.level=r,!0}})),a.next=11,regeneratorRuntime.awrap(e.$ajax("birdsGroup",{type:1,weizhi:JSON.stringify(i)}));case 11:e.$store.commit("initBirdList",i),w["a"].updateBirdView();case 13:case"end":return a.stop()}}))},onMixed:function(){e.promptShow=!0}})},onConfirm:function(){this.promptShow=!1,this.$router.replace({path:"/"})}}},x=j,k=(n("dd0a"),n("2877")),P=Object(k["a"])(x,r,i,!1,null,"088ac145",null);t["default"]=P.exports},dd0a:function(e,t,n){"use strict";var r=n("2f8c"),i=n.n(r);i.a}}]);